# 数据的图表展示

- 数据预处理
- 品质数据的整理与显示
- 数值型数据的整理与显示
- 合理使用图表

## 数据类型可视化

- 定性数据
  - 频数分布表
    - 单变量分布表
    - 双变量列联表
  - 图示方法
    - 条形图
    - 饼图
    - 环形图
- 定量数据
  - 频数分布表
    - 分组表
  - 图示方法
    - 展示分布特征
      - 直方图
      - 茎叶图
      - 箱线图
    - 考察变量间的关系
      - 散点图
    - 比较多样本相似
      - 雷达图
      - 轮廓图

# 数据预处理

- 数据审核
  - 检查数据中的异常
- 数据筛选
  - 找出符合条件的数据
- 数据排序
  - 升序 VS 降序
  - 寻找数据的基本特征
- 数据透视
  - 按需要汇总

## 数据审核

- 原始数据(raw data)
- 二手数据(second-hand data)

### 原始数据

1. 完整性

    - 调查单位是否存漏(数据表中的'行 row')
    - 特征是否齐全(数据表中的'列 column')

2. 准确性

    - 数据是否符合实际
    - 数据是否存在异常

### 二手数据(second-hand data)

1. 适用性
   - 数据来源、数据口径及相关背景资料
   - 是否符合需求
2. 时效性
   - 使用最新数据
3. 是否需要进一步加工


## 数据筛选与排序

### 数据筛选

筛选的内容：
- 剔除不符合要求、有明显错误的数据
- 筛选符合特定条件的数据

### 数据排序

- 定性数据
- 数值型数据

#### 定性数据
- 字母型
  - a $\rightarrow$ z
  - z $\rightarrow$ a
- 汉字型
  - 拼音
  - 笔画

#### 数值型

- 递增(ascending)
- 递减(descending)



## 数据透视表(pivot table)

作用：
- 从复杂的数据提取有用的信息
- 对数据表的重要信息按需求进行汇总
- 形成符合需求的交叉表
- 数据表首行必须有列标题

pandas实现pivot table: `pd.pivot_table()`

```py
import pandas as pd 

pd.pivot_table(data=df,values=['col1'],columns=['col2'],index=['col3'],aggfunc,fill_value,margin)

# data: 需要进行透视的 Dataframe
# values: data中需要汇总的列,str或list
# columns: 列层次字段, 根据所选的columns进行进一步分割, str或list
# index: 每个pivot table必须拥有一个Index
# aggfunc: 聚合方法
# fill_value: 缺失值填充
# margin: 是否边缘汇总, bool型，默认是False
```

# 数据的整理与显示
- 定性数据
  - 分类数据
  - 顺序数据
- 数值型数据

基本方法：
- 分清数据类型
- 定性数据$\Rightarrow$分类整理
- 数值型数据$\Rightarrow$分组整理

## 定性数据
- 分类数据
- 顺序数据

### 分类数据整理

1. 列出各类别
2. 计算各类别频数
3. 制作频数分布表
4. 可视化

可汇总的统计量
- 频数
- 比例
- 百分比
- 比率

pandas实现：`pd.crosstab()`

### 分类数据可视化
- 条形图
- 帕累托图
- 饼图


## 顺序数据

### 顺序数据整理
- 累积频数(cumulative frequency)


各类别频数逐级累加

- 累积频率(cumulative percentages)


各类别频率(%)逐级累加


### 顺序数据可视化
- 累计频数分布图
- 环形图


## 数值型数据
- 数据分组
- 可视化

### 数据分组
要点：
- 将变量值的一个区间作为一组
- 适合连续变量
- 适合变量较多的情况
- 原则：不重不漏
- 等距分组 VS 不等距分组

步骤：
1. 确定组数

组数的确定应以能够显示数据的分布特征和规律为目的

2. 确定组距(class width)

组距是一个组的上限与下限之差，可根据全部数据的最大值和最小值及所分组数来确定:
$$
class \ width=\frac{max-min}{class \ nums}
$$

3. 统计各组频数并整理频数分布表

重要概念
- 下限(lower limit): 组最小值
- 上限(upper limit): 组最大值
- 组距(class width)
- 组中值(class midpoint): 

$$
class \ midpoint=\frac{upper \ limit+lower limit}{2}
$$

pandas实现`pd.cut()`

### 可视化
- 已分组数据
    - 直方图(histogram)
    - 折线图(plot)
- 未分组数据
    - 茎叶图
    - 箱线图(box plot)
- 时间序列数据(time series)
  - 线图(line plot)
- 多变量数据
  - 双变量关系——2D散点图
  - 气泡图(bubble chart)
  - 雷达图(radar chart)

# 合理使用图表
- 鉴别图形优劣的准则
- 统计表设计

## 鉴别图形优劣准则

基本特征：
- 显示数据
- 让读者把注意力集中在内容上
- 避免歪曲
- 强调数据之间的比较
- 服务于一个明确目标
- 有对图表统计描述和文字说明

优劣准则：
- 精心设计、有助于东侧问题的实质
- 使复杂观点得到简明、确切、高效的阐述
- 能在最短时间内以最少的文字给受众提供最大量信息
- 表述数据真实情况

## 统计表设计
- 合理安排统计表结构
- 总标题内容应满足3W要求






